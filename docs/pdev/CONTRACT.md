# Parallel Development Contract（並行開発 契約）

## 目的
複数エージェントの並行作業を、速さではなく「壊れずに合流できること」を最優先で運用する。

## この契約の使い方
- 並行作業は、この契約と DAG に従って進める。
- 契約の変更は、ワーカー単独の判断ではなく、`docs/pdev/active/comment.md` に提案を書き、アーキテクトへ相談する。

## 用語
- RUN: 今回の並行開発のひとまとまり（RUN_IDで識別）
- Task: DAG のノード。依存関係と成果物を持つ
- Architect: DAG/契約/指示書/worktree を整える役割
- Worker: task.md の範囲に集中して実装する役割

## 並行化の原則
- 依存がある作業ではなく、依存がない作業を並行化する。
- マージ（統合）は同時ではなく、1 本ずつ順番に行う。

## 変更領域の境界（責務分離）
### ワーカーが集中する範囲
- task.md に書かれた SCOPE の変更に集中する
- 共有境界（例: `src/types/index.ts`, `webpack.config.js`, `public/manifest.json`）に変更が必要に見える場合は、作業で押し切らず「基盤タスク切り出し」を提案する

### アーキテクトが扱う範囲
- DAG と契約の作成・更新
- 共有境界を触る基盤タスクの実行（必要な場合）
- worktree/ブランチの作成と終了処理
- `docs/20251219_PLAN1.md` / `docs/requirement.md` の同期

## 成果物（ワーカーのアウトプット）
- PR または diff で提出できる形にまとめる
- 受け入れのために必要な情報を残す:
  - 変更概要（3〜7行）
  - 変更ファイル一覧
  - 動作確認手順（最低 `npm run build`）
  - リスクとロールバック観点

## 進捗共有
- 進捗共有は会話だけではなく、task.md の「進捗ログ」を更新して残す
- ブロッカーは抱えず、早めに「依存」「質問」として明文化する

